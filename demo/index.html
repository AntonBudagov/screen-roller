<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="index.css" rel="stylesheet">
    <link href="../screen-roller.css" rel="stylesheet">

    <script src="../vendors/jquery.js"></script>
    <script src="../vendors/wheel-indicator.js"></script>
    <script src="../vendors/hammer.js"></script>
    <script src="../screen-roller-2.1.js"></script>
</head>
<body>
<ul class="menu">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
</ul>
<ul class="arrows">
    <li class="up">up</li>
    <li class="down">down</li>
</ul>
<div class="roller">
    <div class="screen" data-hash="first">1</div>
    <div class="screen" data-hash="second">2</div>
    <div class="screen" data-hash="third">3</div>
    <div class="screen" data-hash="fourth">4</div>
    <div class="screen" data-hash="fifth">5</div>
    <div class="screen" data-hash="sixth">6</div>
</div>

</body>
</html>

<script type="text/javascript">

    (function(){
        var indicator = new WheelIndicator({
            preventMouse: true,
            callback: function(e) {
                if(e.direction === 'down') {
                    roller.moveTo('down');
                }

                if(e.direction === 'up') {
                    roller.moveTo('up');
                }
            }
        });

        setCurrentItemMenu = function(index) {
            $('.menu li').removeClass('current')
                    .eq(index)
                    .addClass('current');
        };

        $('.menu li').on('click', function() {
            roller.moveTo($(this).index())
        });

        $('.arrows .up').on('click', function() {
            roller.moveTo('up');
        });

        $('.arrows .down').on('click', function() {
            roller.moveTo('down');
        });

        var roller = $('.roller').screenroller({
            showScrollBar: true,
//            startScreen: 2,
            directionAnimation: 'from-top',
            changeScreen: function(index) {
                setCurrentItemMenu(index);
            },
            beforeMove: function(index) {
                setCurrentItemMenu(index);
            },
            onScreenMod: function() {
                indicator.turnOn();
            },
            onSolidMod: function () {
                indicator.turnOff();
            }
        });

        //for touch devices

//        var startPositionY,
//                currentPositionY,
//                direction,
//                transitionDuration,
//                action = {
//                    shiftDown: {
//                        directionDown: function(){
//                            roller.currentScreen !== 0 ? roller.moveTo('up') : roller.moveTo(roller.currentScreen);
//                        },
//                        directionUp:   function(){
//                            roller.moveTo(roller.currentScreen);
//                        }
//                    },
//                    shiftUp: {
//                        directionDown: function(){
//                            roller.moveTo(roller.currentScreen);
//                        },
//                        directionUp:   function(){
//                            roller.currentScreen !== roller.countScreens - 1 ? roller.moveTo('down') : roller.moveTo(roller.currentScreen);
//                        }
//                    }
//                };
//
//        var mc = new Hammer.Manager(roller.get(0));
//
//        mc.add(new Hammer.Pan());
//
//        mc.on("panstart", function(e) {
//            currentPositionY = roller.getOffset()[1];
//            startPositionY = e.center.y;
//            $('.roller').css('transitionDuration', '0s');
//        });
//
//        mc.on("panup", function(e) {
//            var newOffset;
//            if(currentPositionY) {
//                (roller.currentScreen === roller.countScreens - 1) ?
//                        newOffset = ((~~e.center.y - ~~startPositionY) / 4 ) + ~~currentPositionY :
//                        newOffset =   ~~e.center.y - ~~startPositionY + ~~currentPositionY;
//
//                roller.updatePosition(newOffset);
//                direction = 'up';
//            }
//        });
//
//        mc.on("pandown", function(e) {
//            var newOffset;
//            if(currentPositionY) {
//                (roller.currentScreen === 0) ?
//                        newOffset = ((~~e.center.y - ~~startPositionY) / 4 ) + ~~currentPositionY :
//                        newOffset =   ~~e.center.y - ~~startPositionY + ~~currentPositionY;
//
//                roller.updatePosition(newOffset);
//                direction = 'down';
//            }
//        });
//
//        mc.on("panend", function(e) {
//            var shiftValue = (~~e.center.y > ~~startPositionY) ? 'shiftDown' : 'shiftUp';
//            var directionValue = (direction === 'down') ? 'directionDown' : 'directionUp';
//
//            action[shiftValue][directionValue]();
//            currentPositionY = null;
//        });
    }())

</script>
